"$schema" = "https://yazi-rs.github.io/schemas/keymap.json"

[manager]

keymap = [
	# Basics
	{ on = [ "<Esc>", "<C-[>" ], run = "escape", desc = "Exit visual mode, clear selected, or cancel search" },
	{ on = [ "q" ],     run = "quit",               desc = "Exit the process" },
	{ on = [ "Q" ],     run = "quit --no-cwd-file", desc = "Exit without writing cwd-file" },
	{ on = [ "<C-q>" ], run = "close",              desc = "Close tab or quit" },
	{ on = [ "<C-z>" ], run = "suspend",            desc = "Suspend the process" },

	# Navigation (hjkl + arrows + pages)
	{ on = [ "j", "<Down>" ], run = "arrow 1", desc = "Cursor down" },
	{ on = [ "k", "<Up>" ],   run = "arrow -1", desc = "Cursor up" },
	{ on = [ "J", "<S-Down>" ], run = "arrow 5", desc = "Cursor down 5" },
	{ on = [ "K", "<S-Up>" ],   run = "arrow -5", desc = "Cursor up 5" },
	{ on = [ "h", "<Left>" ],  run = "leave", desc = "Go to parent directory" },
	{ on = [ "l", "<Right>" ], run = "enter", desc = "Enter child directory" },

	{ on = [ "H" ], run = "back",    desc = "Go to previous dir" },
	{ on = [ "L" ], run = "forward", desc = "Go to next dir" },

	{ on = [ "<C-u>", "<C-PageUp>" ],   run = "arrow -50%",  desc = "Page up (half)" },
	{ on = [ "<C-d>", "<C-PageDown>" ], run = "arrow 50%",   desc = "Page down (half)" },
	{ on = [ "<C-b>", "<PageUp>" ],     run = "arrow -100%", desc = "Page up" },
	{ on = [ "<C-f>", "<PageDown>" ],   run = "arrow 100%",  desc = "Page down" },

	{ on = [ "g", "g" ], run = "arrow -99999999", desc = "Top of list" },
	{ on = [ "G" ],      run = "arrow 99999999",  desc = "Bottom of list" },

	# Preview seek
	{ on = [ "<A-j>", "<A-PageDown>" ], run = "seek 5", desc = "Seek preview down" },
	{ on = [ "<A-k>", "<A-PageUp>" ],   run = "seek -5", desc = "Seek preview up" },

	# Selection
	{ on = [ "<Space>" ], run = [ "select --state=none", "arrow 1" ], desc = "Toggle selection" },
	{ on = [ "v" ],       run = "visual_mode",           desc = "Enter visual mode" },
	{ on = [ "V" ],       run = "visual_mode --unset",   desc = "Enter unset visual mode" },
	{ on = [ "<C-a>" ],   run = "toggle_all --state=true", desc = "Select all" },
	{ on = [ "<C-r>" ],   run = "toggle_all --state=none", desc = "Invert selection" },

	# File Ops
	{ on = [ "o", "<Enter>" ],         run = "open",               desc = "Open files" },
	{ on = [ "O", "<C-Enter>" ],       run = "open --interactive", desc = "Open interactively" },
	{ on = [ "y" ], run = "yank",       desc = "Copy files" },
	{ on = [ "Y", "X" ], run = "unyank", desc = "Unyank files" },
	{ on = [ "x" ], run = "yank --cut", desc = "Cut files" },
	{ on = [ "p" ], run = "paste",      desc = "Paste" },
	{ on = [ "P" ], run = "paste --force", desc = "Paste (overwrite)" },
	{ on = [ "-" ], run = "link",       desc = "Symlink absolute" },
	{ on = [ "_" ], run = "link --relative", desc = "Symlink relative" },
	{ on = [ "d" ], run = "remove",     desc = "Trash files" },
	{ on = [ "D" ], run = "remove --permanently", desc = "Delete permanently" },
	{ on = [ "a" ], run = "create",     desc = "Create file or dir" },
	{ on = [ "r" ], run = "rename --cursor=before_ext", desc = "Rename" },

	# Shell
	{ on = [ ";" ], run = "shell",         desc = "Run shell command" },
	{ on = [ ":" ], run = "shell --block", desc = "Run shell command (block UI)" },

	# Visibility / Search / Plugin
	{ on = [ "." ], run = "hidden toggle", desc = "Toggle hidden files" },
	{ on = [ "s" ], run = "search fd",     desc = "Search by filename" },
	{ on = [ "S" ], run = "search rg",     desc = "Search by content" },
	{ on = [ "<C-s>" ], run = "search none", desc = "Cancel search" },
	{ on = [ "z" ], run = "plugin zoxide",  desc = "Jump with zoxide" },
	{ on = [ "Z" ], run = "plugin fzf",     desc = "Jump/reveal with fzf" },

	# Linemode
	{ on = [ "m", "s" ], run = "linemode size",        desc = "Linemode: size" },
	{ on = [ "m", "p" ], run = "linemode permissions", desc = "Linemode: permissions" },
	{ on = [ "m", "m" ], run = "linemode mtime",       desc = "Linemode: mtime" },
	{ on = [ "m", "n" ], run = "linemode none",        desc = "Linemode: none" },

	# Copy
	{ on = [ "c", "c" ], run = "copy path",             desc = "Copy absolute path" },
	{ on = [ "c", "d" ], run = "copy dirname",          desc = "Copy dir name" },
	{ on = [ "c", "f" ], run = "copy filename",         desc = "Copy filename" },
	{ on = [ "c", "n" ], run = "copy name_without_ext", desc = "Copy name w/o ext" },

	# Filter / Find
	{ on = [ "f" ], run = "filter --smart", desc = "Filter files" },
	{ on = [ "/" ], run = "find --smart", desc = "Find next" },
	{ on = [ "?" ], run = "find --previous --smart", desc = "Find previous" },
	{ on = [ "n" ], run = "find_arrow", desc = "Next match" },
	{ on = [ "N" ], run = "find_arrow --previous", desc = "Prev match" },

	# Sorting (",x" = sort by x)
	{ on = [ ",", "a" ], run = "sort alphabetical --dir-first", desc = "Sort A-Z" },
	{ on = [ ",", "A" ], run = "sort alphabetical --reverse --dir-first", desc = "Sort Z-A" },
	{ on = [ ",", "c" ], run = "sort created --dir-first", desc = "Sort by created" },
	{ on = [ ",", "C" ], run = "sort created --reverse --dir-first", desc = "Sort by created (rev)" },
	{ on = [ ",", "e" ], run = "sort extension --dir-first", desc = "Sort by extension" },
	{ on = [ ",", "E" ], run = "sort extension --reverse --dir-first", desc = "Sort by extension (rev)" },
	{ on = [ ",", "m" ], run = "sort modified --dir-first", desc = "Sort by modified" },
	{ on = [ ",", "M" ], run = "sort modified --reverse --dir-first", desc = "Sort by modified (rev)" },
	{ on = [ ",", "n" ], run = "sort natural --dir-first", desc = "Sort natural" },
	{ on = [ ",", "N" ], run = "sort natural --reverse --dir-first", desc = "Sort natural (rev)" },
	{ on = [ ",", "s" ], run = "sort size --dir-first", desc = "Sort by size" },
	{ on = [ ",", "S" ], run = "sort size --reverse --dir-first", desc = "Sort by size (rev)" },

	# Tabs
	{ on = [ "t" ], run = "tab_create --current", desc = "New tab" },
	{ on = [ "[" ], run = "tab_switch -1 --relative", desc = "Prev tab" },
	{ on = [ "]" ], run = "tab_switch 1 --relative",  desc = "Next tab" },
	{ on = [ "{" ], run = "tab_swap -1", desc = "Swap with prev tab" },
	{ on = [ "}" ], run = "tab_swap 1",  desc = "Swap with next tab" },

	# Tab numbers
	{ on = [ "1" ], run = "tab_switch 0", desc = "Tab 1" },
	{ on = [ "2" ], run = "tab_switch 1", desc = "Tab 2" },
	{ on = [ "3" ], run = "tab_switch 2", desc = "Tab 3" },
	{ on = [ "4" ], run = "tab_switch 3", desc = "Tab 4" },
	{ on = [ "5" ], run = "tab_switch 4", desc = "Tab 5" },
	{ on = [ "6" ], run = "tab_switch 5", desc = "Tab 6" },
	{ on = [ "7" ], run = "tab_switch 6", desc = "Tab 7" },
	{ on = [ "8" ], run = "tab_switch 7", desc = "Tab 8" },
	{ on = [ "9" ], run = "tab_switch 8", desc = "Tab 9" },

	# Goto
	{ on = [ "g", "h" ], run = "cd ~",           desc = "Go to home" },
	{ on = [ "g", "c" ], run = "cd ~/.config",   desc = "Go to config" },
	{ on = [ "g", "d" ], run = "cd ~/Downloads", desc = "Go to downloads" },
	{ on = [ "g", "t" ], run = "cd /tmp",        desc = "Go to /tmp" },
	{ on = [ "g", "<Space>" ], run = "cd --interactive", desc = "Go to dir (interactive)" },

	# Tasks / Help
	{ on = [ "w" ], run = "tasks_show", desc = "Task manager" },
	{ on = [ "~" ], run = "help",       desc = "Help" },
]

[tasks]

keymap = [
	{ on = [ "<Esc>", "<C-[>", "<C-q>", "w" ], run = "close", desc = "Close task manager" },
	{ on = [ "j", "<Down>" ], run = "arrow 1", desc = "Down" },
	{ on = [ "k", "<Up>" ],   run = "arrow -1", desc = "Up" },
]

